<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("button").click(function(){
        $.get("ts2.html", function(data, status){
            //alert("Data: " + data + "\nStatus: " + status);
            //偵測連結類型的元素
            var link = data.match(/<a.*?a>/g)
            //var link_ID = link[i];
            console.log(link)
            for (var i = 0; i < link.length; i++) {
                  var link_ID = new Array;
                  link_ID[i] = link[i].replace(/"/g,"")
                  link_ID[i] = link_ID[i].match(/id=.*? /g)
                  console.log(link_ID[i])

                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  //link_ID2 = link_ID[0].replace("\"","")
                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  link_ID[i] = link_ID[i].toString().replace("id=","")
                  link_ID[i] = link_ID[i].toString().replace(" ","")

                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  console.log(link_ID[i])
                  str = link[i].toString();
                   //$("#text").append(i+":"+ str + "<br>")
                   var idiv = document.createElement('div')
                   idiv.id = link_ID[i];
                   idiv.className = 'block'
                   document.getElementsByTagName('body')[0].appendChild(idiv);
                   text = "$(\"#" + link_ID[i] + "\").click(function(){<br/> \n\ gtag(\'event\', \'action\', <br/>{ \'event_category\' : \'ec\', <br/>\'event_label\' : \'el\' });" +
                        "<br/>});"
                   $("'#"+link_ID[i] +"'").html(i + ": <br>"+ str + ":"+text +"<br>")


           }



            var button = data.match(/button.*?">/g)
            //var str2 = str.split(",")        
            // for (var i = 0; i < button.length; i++) {
            //  //$("#text").append(i+":"+ button[i] + "<br>")
            //  var button2 = new Array;
            //  console.log("1:"+button[i])
            //  button2[i] = button[i].match(/class=".*?"/g)
            //  if(button2[i] == null){ 
            //  	continue;
            //  }
            //  console.log("2:"+button2[i])
            //  var button3 = new Array;
            //  var test = button2[i].toString();
            //  button3[i] = test.replace(/class=".*?/,"")
            //  button3[i] = button3[i].replace(/".*?/,"")
            //  button3[i] = button3[i].replace(/ /,".")
            //  classname = button3[i].replace(/\./," ")

            //  if(button3[i] == null){ 
            //  	continue;
            //  }
             // console.log("3:"+button3[i])
             // var idiv = document.createElement('div')
             // //idiv.id = button3[i];
             // idiv.className = classname
             // console.log("div"+idiv.id)
             // document.getElementsByTagName('body')[0].appendChild(idiv);
             // text = "$(\'." + button3[i] + "').click(function(){<br/> \n\ gtag(\'event\', \'action\', <br/>{ \'event_category\' : \'ec\', <br/>\'event_label\' : \'el\' });" +
             // 	"<br/>});"
             // console.log(text)
             // classname2 = '.'+ button3[i];
             // console.log(button3[i])
             //$("'."+button3[i]+"'").html(i+":"+text +"<br><br>")
             //$(classname2).html(text +"<br><br>")
            	// var str = data.match(/<a id=".*?>/g)
             //    var str2 = str[i];
             //    console.log(str2)
             //    str2 = str2.match(/id=".*?"/g)
             //    console.log(str2)
             //    //str2 = str2.replace(/\'/gi,' ')
             //    str2 = str2[0].replace("\"","")
             //    str2 = str2.replace("\"","")
             //    console.log(str2)
             //    str3 = str2.replace("id=","")
             //    console.log(str3)
             //     $("#text").append(i+":"+ str[i] + "<br>")
             //     var idiv = document.createElement('div')
             //     idiv.id = str3;
             //     idiv.className = 'block'
             //     document.getElementsByTagName('body')[0].appendChild(idiv);
             //     text = "$(\"#" + str3 + "\").click(function(){<br/> \n\ gtag(\'event\', \'action\', <br/>{ \'event_category\' : \'ec\', <br/>\'event_label\' : \'el\' });" +
             //     	"<br/>});"
             //     console.log(text)
             //     $('#'+str3).html(i+":"+text +"<br><br>")
             //     //$("#"+str2).append(i+":"+ str2 + "<br>");
            
        });
    });


});

</script>
</head>
<body>
<div id="text"></div>
<button >Send an HTTP GET request to a page and get the result back</button>
<div class="a b">1234556</div>

</body>
<script type="text/javascript">
	$('.a.b').text("test class")

</script>
</html>
