<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("button").click(function(){
        $.get("ts.htm", function(data, status){
            //alert("Data: " + data + "\nStatus: " + status);
            //偵測連結類型的元素
            var link = data.match(/<a.*?a>/g)
            var button_data = data.match(/<button.*?>/g)
            console.log(button_data)
            for (var i = 0; i < link.length; i++) {
                  var link_ID = new Array;
                  link_ID[i] = link[i].replace(/"/g,"")
                  link_ID[i] = link_ID[i].match(/id=.*? /g)

                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  link_ID[i] = link_ID[i].toString().replace("id=","")
                  link_ID[i] = link_ID[i].toString().replace(" ","")

                  if(link_ID[i] == null)
                  {
                        continue;
                  }
                  str = link[i].toString();
                   var idiv = document.createElement('div')
                   idiv.id = link_ID[i];
                   idiv.className = 'block'
                   document.getElementsByTagName('body')[0].appendChild(idiv);
                   text = "$(\"#" + link_ID[i] + "\").click(function(){<br/> \n\ gtag(\'event\', \'action\', <br/>{ \'event_category\' : \'ec\', <br/>\'event_label\' : \'el\' });" +
                        "<br/>});"
                   $("#"+link_ID[i]).html(i + ": <br>"+ str + "<br>:"+text +"<br>")
                   
                   var select = '<form> \n\
                   Event_Category : \n\
                  <input type="text" name="Event_Category"> <br>\n\
                  Event_Action : \n\
                  <input type="text" name="Event_Action"> <br>\n\
                     Event_Label<select id="event_label" size="4">\n\
                       <option>form</option>\n\
                       <option>questionnaire</option>\n\
                       <option>button</option>\n\
                       <option>others</option>\n\
                     </select>\n\
                  <input id=' + link_ID[i]+ '2' + ' type="button" value="確認"> <br>\n\
                   </form>' 
                   $("#"+link_ID[i]).append(select + '<br>')

           }

            for (var i = 0; i < button_data.length; i++) {
                  var button = new Array;
                  button[i] = button_data[i].match(/class=".*?"/g)

                  if(button[i] == null)
                  {
                        continue;
                  }

                  button[i] = button[i].toString().replace("class=","")
                  button[i] = button[i].toString().replace('"',"")
                  button[i] = button[i].toString().replace('"',"")
                  console.log(button[i])
                  if(button[i] == null)
                  {
                        continue;
                  }
                  console.log(button[i])
                  str = button_data[i].toString();
                  classname = button[i]
                  console.log(str)
                  var idiv2 = document.createElement('div')
                  idiv2.className = classname
                  document.getElementsByTagName('body')[0].appendChild(idiv2);
                  text = "$(\'." + button[i] + "').click(function(){<br/> \n\ gtag(\'event\', \'action\', <br/>{ \'event_category\' : \'ec\', <br/>\'event_label\' : \'el\' });" +
                        "<br/>});"
                  classname2 = button[i].toString().replace(' ',".")

                   classname2 = '.'+ classname2;
                   //$("'."+button3[i]+"'").html(i+":"+text +"<br><br>")
                   $(classname2).html(i + ": <br>"+ str + classname +"</button>"+ "<br>:"+text +"<br>")

           }
            
        });
    });
    $('#send').click(function(){
      new form = new Array;
      form = $("form").serializeArray()
      console.log(form)
    })
     console.log($('form').serialize())
});

</script>
</head>
<body>
<div id="text"></div>
<button >Send an HTTP GET request to a page and get the result back</button>
<button id='send'>確認</button>
<div class="a b">1234556</div>
</body>

</html>
