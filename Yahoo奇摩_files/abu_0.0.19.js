YUI.add("type_abu",function(e,d){var h=e&&e.Af&&e.Af.rapid;var c;var a=e&&e.VideoPlatform&&e.VideoPlatform.API_Events;var g={startscreen:{rspns:"nav",elm:"hdln",itc:"0",pkgt:"111"},endscreen:{rspns:"nav",elm:"btn",itc:"0",pkgt:"111"},tumblr:{t3:"share",slk:"tumblr",elm:"btn",elmt:"sh-tbr",itc:"1",pkgt:"111"},facebook:{t3:"share",slk:"facebook",elm:"btn",elmt:"sh-fb",itc:"1",pkgt:"111"},twitter:{t3:"share",slk:"twitter",elm:"btn",elmt:"sh-tw",itc:"1",pkgt:"111"},email:{t3:"share",slk:"mail",elm:"btn",elmt:"sh-eml",itc:"1",pkgt:"111"},unmute:{t3:"ctrl",slk:"unmute",elm:"btn",elmt:"ctrl",itc:"1",pkgt:"111"},fullscreen:{t3:"ctrl",slk:"full screen on",elm:"btn",elmt:"ctrl",itc:"1",pkgt:"111"},customMute:{t3:"ctrl",slk:"custom-mute",elm:"btn",elmt:"ctrl",itc:"1",pkgt:"111"},expand:{t3:"ctrl",slk:"resize",elm:"btn",elmt:"ctrl",itc:"1",pkgt:"111"}};var f=e.Object.getValue(YUI,["Env","My","settings","context"]);var b=(f.videoAdBeaconsDisabled===1);e.Abu={init:function(){var i=this;e.Af.Event.on("video-manager:create_player_instance",function(o){var n=null;var j;var m;var l;var p;var k;if(!o){return;}if(!i.getRapid()){return;}if(!i.getRapidTracker()){return;}if(!i.getVpApiEvents()){return;}if(o.player){k=o.player;p=o.playerNode;l=p&&p.ancestor&&p.ancestor(".js-video-content");if(!k||!p||!l){return;}}if(o.videoPlayer&&o.containerNode){k=o.videoPlayer;j=o.containerNode;if(j){l=j.one&&j.one(".js-video-content");n=j.getData&&j.getData("videoBeacons");}}if(b){n={};}if(!l||!k||!k.on){return;}m=i.getBaseKeys(l);if(m){i.attachListeners(k,l,m,n);}});},attachListeners:function(o,n,m,l){var j=this;var k={};var i;o.on&&o.on(a.UI_INTERACT,function(r){var p=r&&r.srcElement&&r.srcElement.toLowerCase();var q={};switch(p){case"startscreen":q=g.startscreen;break;case"es-rpl":q=g.endscreen;break;case"btn-sh-tumblr":q=g.tumblr;break;case"btn-sh-fb":q=g.facebook;break;case"btn-sh-twitter":q=g.twitter;break;case"btn-sh-email":q=g.email;break;case"ctrl-mute-btn-off":q=g.unmute;break;default:return;}q=e.merge(m,q);j.sendVideoBeacon(q);});o.on(a.PLAYER_FULLSCREEN_CHANGE,function(p){var q={};if(!p){return;}q=g.fullscreen;q=e.merge(m,q);j.sendVideoBeacon(q);});i=n.one(".ui-wrapper");if(i&&i.delegate){i.delegate("click",function(q){var p=g.customMute;p=e.merge(m,p);this.sendVideoBeacon(p);},".ui-mute-btn",j);i.delegate("click",function(q){var p=g.expand;p=e.merge(m,p);this.sendVideoBeacon(p);},".ui-expand-btn",j);}if(!l){return;}o.on(a.PLAYBACK_START,function(){j.sendAdBeacon("VIDEO_START",l,k);});o.on(a.PLAYBACK_TIME_UPDATE,function(q,p,r){if(p>3&&!k.VIDEO_VIEW){j.sendAdBeacon("VIDEO_VIEW",l,k);}if(p>30&&!k.VIDEO_30_SEC){j.sendAdBeacon("VIDEO_30_SEC",l,k);}if(p>r*0.25&&!k.VIDEO_QUARTILE_25){j.sendAdBeacon("VIDEO_QUARTILE_25",l,k);}if(p>r*0.5&&!k.VIDEO_QUARTILE_50){j.sendAdBeacon("VIDEO_QUARTILE_50",l,k);}if(p>r*0.75&&!k.VIDEO_QUARTILE_75){j.sendAdBeacon("VIDEO_QUARTILE_75",l,k);}});o.on(a.PLAYBACK_COMPLETE,function(){j.sendAdBeacon("VIDEO_QUARTILE_100",l,k);k={};});},getBaseKeys:function(l){var k;var j;var i;if(!l||!l.getDOMNode()){return null;}k=h.parseYLK&&h.parseYLK(l);if(k.t2==="strm"){j=l.ancestor(".js-stream-content");i=j&&j.one(".js-stream-item-title");k.sec=k.t2;k.aid=k.g;k.slk=(i&&i.getHTML())||"stream video";if(l.ancestor(".js-stream-featured-ad")){k.sp=1;}}return k;},sendVideoBeacon:function(i){c.beaconClick&&c.beaconClick(i.sec,i.slk,parseInt(i.cpos,10),i);},sendAdBeacon:function(k,n,m){var o;var l;var j;if(!k||m[k]){return;}o=n&&n[k];if(!o){return;}o=[].concat(o);for(l=0;l<o.length;l++){j=o[l];if(!j){continue;}e.Af.Beacon.send(j);m[k]=true;}},getVpApiEvents:function(){if(!a){a=e.VideoPlatform&&e.VideoPlatform.API_Events;}return a;},getRapid:function(){if(!h){h=e.Af.rapid;}return h;},getRapidTracker:function(){var i=this.getRapid();c=i.getRapidTracker();return c;}};e.Abu.init();},"0.0.1",{requires:[]});/* Copyright (c) 2018, Yahoo! Inc.  All rights reserved. */
